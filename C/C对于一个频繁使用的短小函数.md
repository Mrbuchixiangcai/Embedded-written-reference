## C/C++对于一个频繁使用的短小函数

| 区别     | C                    | C++                            |
| -------- | -------------------- | ------------------------------ |
| 实现     | 宏定义               | 用inline关键字，内联函数       |
| 参数检查 | 不进行参数类型检查   | 内联函数进行类型检查，更加安全 |
| 处理时期 | 预处理器对宏进行替代 | 内联函数通过编译器控制         |

### 函数调用 和 内联函数的区别

1. 函数调用？
   + 优势：函数的引入，可以**减少**程序的目标代码，实现程序代码和数据的**共享**。
   + 缺点：函数调用也会带来降低**时间效率**（不断地参数压栈）的问题；这种转移操作要求在转去前要保护现场并记忆执行的地址，转回后先要恢复现场，并按原来保存地址继续执行。
2. 内联函数inline
   + 引入内联函数的目的是为了解决程序中函数调用的效率问题。
   + 程序编译时：编译器将程序中出现的内联函数的调用**表达式**，用内联函数的**函数体**来进行**替换**；
   + 缺点：通过**空间**代价替换**时间**效率；

### **使用内联函数注意事项**

1. 在内联函数中如果有**复杂操作**将不被内联，如：循环和递归调用。
2. 所有在类的声明中定义的函数将被自动认为是内联函数，但是第1种情况时编译器可能会放弃内联方式。
3. 内联函数的定义必须出现在内联函数第一次被调用之前。

