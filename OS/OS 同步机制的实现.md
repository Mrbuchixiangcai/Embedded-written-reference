## OS 同步机制的实现

### 多线程并发的情况

1. 并发的情况？
   + 共享唯一的硬件设备
   + 共享同一块内存区域
   + 一个进程的运行依赖另一进程对共享资源的执行结果
2. 同步和互斥
   + **同步**：多个进程间存在时序关系，需要**协同工作**以完成一项任务
   + **互斥**：不满足协同的条件，而知识因为**共享具有排他性资源**时

### 同步实现机制：由信号量主打

| 信号量                                      | Mutex                                   | 管程                        |
| ------------------------------------------- | --------------------------------------- | --------------------------- |
| Semaphore S：信号量，表示共享资源的可用数量 | 互斥体                                  | 对Semaphore机制的延伸和改善 |
| Operation P：P原语，用于减少S计数           | Binary Semaphore(0/1)，一种简单实现方式 |                             |
| Operation V：V原语，用于增加S计数           |                                         |                             |

### 管程的用法

1. Semaphore 机制的缺陷：
   + 程序的易读性相对较差，对于信号量的管理也分散在各个参与对象中；
   + 因此有可能引起**死锁，进程饿死**等问题
2. 管程的定义
   + 管程：是可以被多个进程/线程安全访问的对象或模块
   + 管程汇总的方法是受到Mutex保护的，意味着同一时刻只允许一个访问者来使用它们。
3. 管程的特性
   + 安全性；互斥性；共享性