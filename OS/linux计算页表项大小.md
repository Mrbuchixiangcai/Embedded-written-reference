## linux计算页表项大小

### Bit、 Byte、KB、MB、GB之间的换算

```
1 Byte = 8 Bits（即 1B=8b）
1 KB = 1024 Bytes
1 MB = 1024 KB
1 GB = 1024 MB
```

### 几个概念

| 关键词   | 概念                                                         |
| -------- | ------------------------------------------------------------ |
| 逻辑地址 | **程序编译**：生成的目标模块进行编址时都是从0号开始编址，称之为目标模块的相对地址 |
| 虚拟地址 | 计算机处理器的地址有32位和64位的两种，对应的虚拟地址的空间大小分别是2^32字节和2^64**字节**，字节用B表示 |
| 页       | 分页存储管理将进程的逻辑地址空间划分为若干页（面），并且对其编号，号数从0开始，每个页（面）的大小称为页面大小，且大小应为2的幂。Linux下一页大小4KB |

### 如何计算内存中的页大小

+ 32位寻址空间：含有1M个页，页表占用内存4M，含有1M页表项；

1. 题目：32位逻辑地址空间中，一页的大小是（页框）4KB，按字节编制，页式内存管理中如何确定页表项大小？

2. 计算寻址空间包含多少个**页**？

   + ```
     （1）寻址空间大小：size = 2^32 Bytes
     （2）一页的大小：page_one = 4 * 2^10 Bytes
     （3）计算多少个页：page_number = size / page_one = 1M  页
     ```

     ![page_number.png](https://github.com/quronghui/Embedded-written-reference/blob/master/OS/photo/page_number.png)

3. 如何计算**页表**的大小？

   + 页表是对这些页的记录；有多少个页，就需要多少个页表

   + ```
     (1) 32bit的地址空间；一页的大小是 2^12 bits ，占据了逻辑地址的低12bits
     (2) 高20bits逻辑地址：表示1M页的数量；
     (3) 页表占用空间的大小 = 2^10*4KB=4MB大小内存
     ```

   + 页表组成 = 页号 + 页框号  ; 

   ![page_table.png](https://github.com/quronghui/Embedded-written-reference/blob/master/OS/photo/page_table.png)

4. 如何计算页表项？

   + 寻址空间中包含多少个页，就有多少个页表项；
   + 1M

   